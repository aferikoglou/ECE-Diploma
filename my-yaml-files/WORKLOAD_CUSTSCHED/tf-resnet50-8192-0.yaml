apiVersion: batch/v1
kind: Job
metadata:
  name: tf-resnet50-8192-0
spec:
  completions: 1
  parallelism: 1
  template:
    metadata:
      labels:
        GPU_MEM_REQ: '18'
      name: tf-resnet50-8192-0-pod
    spec:
      containers:
      - command:
        - sh
        - -c
        - cp /root/configs/8192/mlperf.conf /root/inference/v0.5/ && cd /root/inference/v0.5/classification_and_detection
          && MODEL_DIR=/root/models/tf-resnet50 DATA_DIR=/root/datasets/fake-imagenet
          ./run_local.sh tf resnet50 gpu --scenario SingleStream
        image: aferikoglou/mlperf-inference:latest
        name: mlperf-inference-container
      restartPolicy: OnFailure
      schedulerName: custom-scheduler
